<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>App Onboarding Flow</title>
    <style>
        :root {
            --bg-color: #1e1e1e;
            --secondary-bg: #262626;
            --text-color: #ffffff;
            --text-secondary: #a0a0a0;
            --accent-color: #3b82f6;
            --accent-hover: #2563eb;
            --border-color: #404040;
            --shadow-color: rgba(0, 0, 0, 0.3);
            --success-color: #10b981;
            --error-color: #ef4444;
            --input-bg: #2a2a2a;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            background-color: var(--bg-color);
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, sans-serif;
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            line-height: 1.5;
        }
        
        .app-container {
            width: 100%;
            max-width: 440px;
            background: var(--secondary-bg);
            border-radius: 12px;
            box-shadow: 0 4px 20px var(--shadow-color);
            overflow: hidden;
            position: relative;
            border: 1px solid var(--border-color);
        }
        
        .screen {
            display: none;
            padding: 32px;
        }
        
        .screen.active {
            display: block;
            animation: fadeIn 0.3s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        h2 {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 16px;
            text-align: center;
        }
        
        p {
            font-size: 16px;
            color: var(--text-secondary);
            margin-bottom: 24px;
            text-align: center;
        }
        
        .logo {
            display: flex;
            justify-content: center;
            margin-bottom: 24px;
        }
        
        .logo-img {
            width: 64px;
            height: 64px;
            background-color: var(--accent-color);
            border-radius: 16px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 28px;
            font-weight: bold;
        }
        
        .form-group {
            margin-bottom: 24px;
        }
        
        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 8px;
            color: var(--text-secondary);
        }
        
        .form-input {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.2s;
            background-color: var(--input-bg);
            color: var(--text-color);
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
        }
        
        .btn {
            display: block;
            width: 100%;
            padding: 14px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
            text-decoration: none;
        }
        
        .btn-primary {
            background-color: var(--accent-color);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: var(--accent-hover);
        }
        
        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
        }
        
        .btn-outline:hover {
            background-color: rgba(255, 255, 255, 0.05);
            border-color: var(--text-secondary);
        }
        
        .links {
            display: flex;
            justify-content: center;
            font-size: 14px;
            margin-top: 16px;
        }
        
        .links a {
            color: var(--text-secondary);
            text-decoration: none;
            margin: 0 8px;
        }
        
        .links a:hover {
            color: var(--accent-color);
            text-decoration: underline;
        }
        
        .verification-inputs {
            display: flex;
            justify-content: space-between;
            margin-bottom: 24px;
        }
        
        .verification-input {
            width: 50px;
            height: 50px;
            text-align: center;
            font-size: 24px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background-color: var(--input-bg);
            color: var(--text-color);
        }
        
        .verification-input:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
        }
        
        .verification-message {
            text-align: center;
            margin-bottom: 24px;
            font-size: 14px;
            color: var(--text-secondary);
        }
        
        .verification-message a {
            color: var(--accent-color);
            text-decoration: none;
        }
        
        .features {
            margin-bottom: 24px;
        }
        
        .feature {
            padding: 16px;
            border-radius: 12px;
            background-color: rgba(255, 255, 255, 0.05);
            margin-bottom: 12px;
            display: flex;
            align-items: flex-start;
            border: 1px solid var(--border-color);
        }
        
        .feature-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            background-color: rgba(59, 130, 246, 0.2);
            display: flex;
            justify-content: center;
            align-items: center;
            margin-right: 12px;
            flex-shrink: 0;
            color: var(--accent-color);
            font-size: 16px;
        }
        
        .feature-content h3 {
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 4px;
            color: var(--text-color);
        }
        
        .feature-content p {
            font-size: 14px;
            margin-bottom: 0;
            text-align: left;
            color: var(--text-secondary);
        }
        
        .step-indicator {
            display: flex;
            justify-content: center;
            margin-bottom: 32px;
        }
        
        .step {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: var(--border-color);
            margin: 0 4px;
        }
        
        .step.active {
            background-color: var(--accent-color);
            width: 24px;
            border-radius: 4px;
        }
        
        .accessibility-image {
            width: 100%;
            border-radius: 8px;
            margin-bottom: 24px;
            border: 1px solid var(--border-color);
        }
        
        .chat-container {
            height: 400px;
            display: flex;
            flex-direction: column;
        }
        
        .chat-messages {
            flex-grow: 1;
            overflow-y: auto;
            padding: 16px;
            background-color: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            margin-bottom: 16px;
            border: 1px solid var(--border-color);
        }
        
        .message {
            margin-bottom: 16px;
            max-width: 80%;
        }
        
        .message.incoming {
            align-self: flex-start;
        }
        
        .message.outgoing {
            align-self: flex-end;
            margin-left: auto;
        }
        
        .message-bubble {
            padding: 12px 16px;
            border-radius: 18px;
            font-size: 16px;
            line-height: 1.4;
        }
        
        .message.incoming .message-bubble {
            background-color: var(--secondary-bg);
            border: 1px solid var(--border-color);
            color: var(--text-color);
        }
        
        .message.outgoing .message-bubble {
            background-color: var(--accent-color);
            color: white;
        }
        
        .chat-input {
            display: flex;
            align-items: center;
        }
        
        .chat-input input {
            flex-grow: 1;
            padding: 12px 16px;
            border: 1px solid var(--border-color);
            border-radius: 24px;
            font-size: 16px;
            margin-right: 8px;
            background-color: var(--input-bg);
            color: var(--text-color);
        }
        
        .chat-input input:focus {
            outline: none;
            border-color: var(--accent-color);
        }
        
        .send-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--accent-color);
            color: white;
            border: none;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
        }
        
        .send-btn:hover {
            background-color: var(--accent-hover);
        }
        
        .screen-title {
            display: flex;
            align-items: center;
            margin-bottom: 24px;
        }
        
        .screen-title h2 {
            margin-bottom: 0;
            margin-right: auto;
        }
        
        .back-btn {
            color: var(--text-secondary);
            background: none;
            border: none;
            cursor: pointer;
            font-size: 20px;
            display: flex;
            align-items: center;
            padding: 4px;
        }
        
        .back-btn:hover {
            color: var(--accent-color);
        }
        
        .success-checkmark {
            width: 80px;
            height: 80px;
            margin: 0 auto 24px;
            border-radius: 50%;
            background-color: rgba(16, 185, 129, 0.1);
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--success-color);
            font-size: 40px;
        }
        
        .loading-spinner {
            display: inline-block;
            width: 24px;
            height: 24px;
            border: 3px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
            margin-right: 8px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Utility Classes */
        .text-center { text-align: center; }
        .mb-16 { margin-bottom: 16px; }
        .mb-24 { margin-bottom: 24px; }
        .mb-32 { margin-bottom: 32px; }
        .mt-16 { margin-top: 16px; }
        .mt-24 { margin-top: 24px; }
        .hidden { display: none; }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Email Screen -->
        <div class="screen active" id="email-screen">
            <div class="logo">
                <div class="logo-img">L</div>
            </div>
            <h2>Welcome to Little Bird</h2>
            <p>Let's set up your assistant to help you capture tasks and ideas effortlessly.</p>
            
            <form id="email-form">
                <div class="form-group">
                    <label for="email" class="form-label">Email address</label>
                    <input type="email" id="email" class="form-input" placeholder="you@example.com" required>
                </div>
                
                <div class="form-group">
                    <div class="terms-checkbox" style="display: flex; align-items: flex-start; margin-bottom: 16px;">
                        <input type="checkbox" id="terms-accept" style="margin-right: 10px; margin-top: 3px;">
                        <label for="terms-accept" style="font-size: 14px; color: var(--text-secondary);">
                            I agree to the <a href="#" id="show-terms" style="color: var(--accent-color);">Terms of Service</a> and <a href="#" id="show-privacy" style="color: var(--accent-color);">Privacy Policy</a>
                        </label>
                    </div>
                </div>
                
                <button type="submit" class="btn btn-primary" id="continue-to-verify">
                    Continue
                </button>
            </form>
            
            <div class="mt-24">
                <p style="font-size: 14px; color: var(--text-secondary); text-align: center; margin-bottom: 16px;">
                    Having issues? You can download the latest version or contact our support team.
                </p>
                <a href="#" class="btn btn-outline" id="download-latest">
                    Download Latest Version
                </a>
            </div>
            
            <div class="links mt-16">
                <a href="#" id="contact-support">Contact Support</a>
            </div>
        </div>
        
        <!-- Verification Screen -->
        <div class="screen" id="verification-screen">
            <div class="screen-title">
                <button class="back-btn" id="back-to-email">‚Üê</button>
                <h2>Verify your email</h2>
            </div>
            
            <p>We've sent a 4-digit code to <span id="email-display">your email</span></p>
            
            <div class="verification-inputs">
                <input type="text" maxlength="1" class="verification-input" data-index="1">
                <input type="text" maxlength="1" class="verification-input" data-index="2">
                <input type="text" maxlength="1" class="verification-input" data-index="3">
                <input type="text" maxlength="1" class="verification-input" data-index="4">
            </div>
            
            <div class="verification-message">
                Didn't receive the code? <a href="#" id="resend-code">Resend</a>
            </div>
            
            <button class="btn btn-primary" id="verify-code">
                Verify Code
            </button>
        </div>
        
        <!-- Accessibility Screen -->
        <div class="screen" id="accessibility-screen">
            <div class="step-indicator">
                <div class="step active"></div>
                <div class="step"></div>
                <div class="step"></div>
                <div class="step"></div>
            </div>
            
            <h2>Enable Accessibility</h2>
            <p>Little Bird needs accessibility permissions to capture text from your screen.</p>
            
            <img src="/api/placeholder/400/200" alt="Accessibility settings screenshot" class="accessibility-image">
            
            <div class="feature mb-24">
                <div class="feature-icon">?</div>
                <div class="feature-content">
                    <h3>Why we need this</h3>
                    <p>This allows our app to capture text from your screen which we use to create tasks and build your assistant - all while respecting your privacy.</p>
                </div>
            </div>
            
            <button class="btn btn-primary mb-16" id="open-accessibility">
                Open Accessibility Settings
            </button>
            
            <button class="btn btn-outline" id="accessibility-done">
                I've Enabled Accessibility
            </button>
        </div>
        
        <!-- Safety Screen -->
        <div class="screen" id="safety-screen">
            <div class="step-indicator">
                <div class="step"></div>
                <div class="step active"></div>
                <div class="step"></div>
                <div class="step"></div>
            </div>
            
            <h2>Your Privacy Matters</h2>
            <p>We take your privacy seriously with these safety measures.</p>
            
            <div class="privacy-visual" style="display: flex; flex-direction: column; align-items: center; margin-bottom: 24px;">
                <div style="width: 120px; height: 120px; background-color: rgba(59, 130, 246, 0.1); border-radius: 60px; display: flex; justify-content: center; align-items: center; margin-bottom: 20px;">
                    <div style="font-size: 48px; color: var(--accent-color);">üîí</div>
                </div>
            </div>
            
            <div class="privacy-cards" style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 24px;">
                <div class="privacy-card" style="background-color: rgba(255, 255, 255, 0.05); border: 1px solid var(--border-color); border-radius: 12px; padding: 16px; display: flex; flex-direction: column; align-items: center; text-align: center;">
                    <div style="width: 48px; height: 48px; background-color: rgba(59, 130, 246, 0.2); border-radius: 24px; display: flex; justify-content: center; align-items: center; margin-bottom: 12px;">
                        <span style="font-size: 24px;">üéÆ</span>
                    </div>
                    <h3 style="font-size: 14px; margin-bottom: 8px;">Full Control</h3>
                    <p style="font-size: 12px; color: var(--text-secondary); margin: 0;">Disable data collection anytime from the app</p>
                </div>
                
                <div class="privacy-card" style="background-color: rgba(255, 255, 255, 0.05); border: 1px solid var(--border-color); border-radius: 12px; padding: 16px; display: flex; flex-direction: column; align-items: center; text-align: center;">
                    <div style="width: 48px; height: 48px; background-color: rgba(59, 130, 246, 0.2); border-radius: 24px; display: flex; justify-content: center; align-items: center; margin-bottom: 12px;">
                        <span style="font-size: 24px;">üìù</span>
                    </div>
                    <h3 style="font-size: 14px; margin-bottom: 8px;">Text Only</h3>
                    <p style="font-size: 12px; color: var(--text-secondary); margin: 0;">We dont record your screen. Only capture text</p>
                </div>
                
                <div class="privacy-card" style="background-color: rgba(255, 255, 255, 0.05); border: 1px solid var(--border-color); border-radius: 12px; padding: 16px; display: flex; flex-direction: column; align-items: center; text-align: center;">
                    <div style="width: 48px; height: 48px; background-color: rgba(59, 130, 246, 0.2); border-radius: 24px; display: flex; justify-content: center; align-items: center; margin-bottom: 12px;">
                        <span style="font-size: 24px;">üóëÔ∏è</span>
                    </div>
                    <h3 style="font-size: 14px; margin-bottom: 8px;">Delete data</h3>
                    <p style="font-size: 12px; color: var(--text-secondary); margin: 0;">You can delete entire captured data anytime</p>
                </div>
                
                <div class="privacy-card" style="background-color: rgba(255, 255, 255, 0.05); border: 1px solid var(--border-color); border-radius: 12px; padding: 16px; display: flex; flex-direction: column; align-items: center; text-align: center;">
                    <div style="width: 48px; height: 48px; background-color: rgba(59, 130, 246, 0.2); border-radius: 24px; display: flex; justify-content: center; align-items: center; margin-bottom: 12px;">
                        <span style="font-size: 24px;">üõ°Ô∏è</span>
                    </div>
                    <h3 style="font-size: 14px; margin-bottom: 8px;">Protected Areas</h3>
                    <p style="font-size: 12px; color: var(--text-secondary); margin: 0;">No data collected from incognito mode and password managers</p>
                </div>
            </div>
            
            <div class="privacy-indicator" style="width: 100%; height: 6px; background-color: rgba(59, 130, 246, 0.1); border-radius: 3px; margin-bottom: 16px; position: relative; overflow: hidden;">
                <div style="position: absolute; top: 0; left: 0; height: 100%; width: 85%; background-color: var(--accent-color); border-radius: 3px;"></div>
            </div>
            <p style="text-align: center; font-size: 12px; color: var(--text-secondary); margin-bottom: 24px;">
                Your data is protected by industry-leading security standards
            </p>
            
            <button class="btn btn-primary" id="continue-to-chat">
                Continue
            </button>
        </div>
        
        <!-- Chat Screen -->
        <div class="screen" id="chat-screen">
            <div class="step-indicator">
                <div class="step"></div>
                <div class="step"></div>
                <div class="step active"></div>
                <div class="step"></div>
            </div>
            
            <h2>Let's Get Started</h2>
            
            <div class="chat-container">
                <div class="chat-messages" id="chat-messages">
                    <div class="message incoming">
                        <div class="message-bubble">
                            Hi there! I'm Little Bird. What's your name?
                        </div>
                    </div>
                </div>
                
                <div class="chat-input">
                    <input type="text" id="chat-input-field" placeholder="Type your message...">
                    <button class="send-btn" id="send-message">‚Üí</button>
                </div>
            </div>
        </div>
        
        <!-- Notification Permission Screen -->
        <div class="screen" id="notification-screen">
            <div class="step-indicator">
                <div class="step"></div>
                <div class="step"></div>
                <div class="step active"></div>
                <div class="step"></div>
            </div>
            
            <h2>Enable Notifications</h2>
            <p>Let's see Little Bird's real-time awareness in action:</p>
            
            <div class="notification-visual" style="display: flex; flex-direction: column; align-items: center; margin: 24px 0;">
                <div style="width: 120px; height: 120px; background-color: rgba(59, 130, 246, 0.1); border-radius: 60px; display: flex; justify-content: center; align-items: center; margin-bottom: 20px;">
                    <div style="font-size: 48px;">üîî</div>
                </div>
            </div>
            
            <div class="feature mb-24">
                <div class="feature-icon">üì≤</div>
                <div class="feature-content">
                    <h3>Real-time Awareness</h3>
                    <p>When I detect interesting activity on your Mac, I'll send you a notification so you can instantly save it.</p>
                </div>
            </div>
            
            <div class="feature mb-24" style="background-color: rgba(59, 130, 246, 0.1); border-color: var(--accent-color);">
                <div class="feature-icon" style="background-color: rgba(59, 130, 246, 0.3);">üß™</div>
                <div class="feature-content">
                    <h3>Try It Out</h3>
                    <p>Go browse anything on your Mac for about 2 minutes. I'll send you a notification when I detect something interesting!</p>
                </div>
            </div>
            
            <button class="btn btn-primary" id="allow-notifications">
                Allow Notifications & Start Browsing
            </button>
            
            <div class="mt-16 text-center hidden" id="waiting-message" style="color: var(--text-secondary); font-size: 14px;">
                Waiting for activity... (You can click below when you receive a notification)
            </div>
            
            <button class="btn btn-outline mt-16 hidden" id="notification-received">
                I've Received a Notification
            </button>
        </div>

        <!-- Mock Notification (for demo purposes) -->
        <div class="mock-notification hidden" id="mock-notification" style="position: fixed; top: 20px; right: 20px; max-width: 320px; background-color: var(--secondary-bg); border: 1px solid var(--border-color); border-radius: 12px; padding: 16px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3); z-index: 1000; animation: slideIn 0.3s ease-out;">
            <div style="display: flex; align-items: center; margin-bottom: 8px;">
                <div style="width: 24px; height: 24px; background-color: var(--accent-color); border-radius: 6px; display: flex; justify-content: center; align-items: center; margin-right: 8px; color: white; font-weight: bold;">L</div>
                <div style="font-weight: 500;">Little Bird</div>
            </div>
            <div style="margin-bottom: 12px; font-size: 14px;">
                I noticed you've been reading about climate change. Would you like to create a note or task about this?
            </div>
            <div style="display: flex; justify-content: flex-end; gap: 8px;">
                <button id="notification-dismiss" style="background: none; border: none; color: var(--text-secondary); font-size: 14px; padding: 4px 8px; cursor: pointer;">Dismiss</button>
                <button id="notification-open" style="background-color: var(--accent-color); color: white; border: none; border-radius: 4px; padding: 4px 8px; font-size: 14px; cursor: pointer;">Open</button>
            </div>
        </div>

        <style>
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        </style>

        <!-- Notification Results Screen -->
        <div class="screen" id="notification-results-screen">
            <div class="step-indicator">
                <div class="step"></div>
                <div class="step"></div>
                <div class="step"></div>
                <div class="step active"></div>
            </div>
            
            <div class="success-checkmark">‚úì</div>
            
            <h2>Activity Detected!</h2>
            <p>Little Bird noticed something interesting in your browsing:</p>
            
            <div style="background-color: rgba(255, 255, 255, 0.05); border-radius: 12px; padding: 16px; margin-bottom: 24px; border: 1px solid var(--border-color);">
                <div style="display: flex; align-items: center; margin-bottom: 12px; padding-bottom: 12px; border-bottom: 1px solid var(--border-color);">
                    <div style="width: 32px; height: 32px; background-color: var(--accent-color); border-radius: 8px; display: flex; justify-content: center; align-items: center; margin-right: 12px; color: white;">
                        <span>üåç</span>
                    </div>
                    <div>
                        <div style="font-weight: 500;">Climate Change Article</div>
                        <div style="font-size: 12px; color: var(--text-secondary);">nytimes.com ‚Ä¢ 2 minutes ago</div>
                    </div>
                </div>
                <div style="font-size: 14px; color: var(--text-secondary); margin-bottom: 16px;">
                    I noticed you spent time reading about climate change solutions and renewable energy options.
                </div>
                <div style="display: flex; gap: 8px;">
                    <button class="btn-outline" style="flex: 1; padding: 8px; font-size: 14px;">Create Task</button>
                    <button class="btn-outline" style="flex: 1; padding: 8px; font-size: 14px;">Save Note</button>
                </div>
            </div>
            
            <div class="chat-container">
                <div class="chat-messages" id="notification-result-messages">
                    <div class="message incoming">
                        <div class="message-bubble">
                            I sent you a notification when I detected you were reading about climate change. In the future, I'll notify you about interesting content you engage with, so you can easily save it. Would you like me to create a task to follow up on renewable energy solutions?
                        </div>
                    </div>
                </div>
                
                <div class="chat-input">
                    <input type="text" id="notification-result-input" placeholder="Type your message...">
                    <button class="send-btn" id="notification-result-send">‚Üí</button>
                </div>
            </div>
            
            <button class="btn btn-primary mt-24" id="finish-onboarding">
                Start Using Little Bird
            </button>
        </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            let userName = '';
            
            // Navigation between screens
            function showScreen(screenId) {
                document.querySelectorAll('.screen').forEach(screen => {
                    screen.classList.remove('active');
                });
                document.getElementById(screenId).classList.add('active');
            }
            
            // Email screen
            document.getElementById('email-form').addEventListener('submit', function(e) {
                e.preventDefault();
                const email = document.getElementById('email').value;
                document.getElementById('email-display').textContent = email;
                showScreen('verification-screen');
            });
            
            // Ensure the continue button works independently as well
            document.getElementById('continue-to-verify').addEventListener('click', function(e) {
                e.preventDefault();
                const email = document.getElementById('email').value;
                const termsAccepted = document.getElementById('terms-accept').checked;
                
                if (!email) {
                    alert('Please enter your email address');
                    return;
                }
                
                if (!termsAccepted) {
                    alert('Please accept the Terms of Service and Privacy Policy to continue');
                    return;
                }
                
                document.getElementById('email-display').textContent = email;
                showScreen('verification-screen');
            });
            
            // Links on email screen
            document.getElementById('show-privacy').addEventListener('click', function(e) {
                e.preventDefault();
                alert('Privacy Policy would open here');
            });
            
            document.getElementById('show-terms').addEventListener('click', function(e) {
                e.preventDefault();
                alert('Terms of Service would open here');
            });
            
            document.getElementById('download-latest').addEventListener('click', function(e) {
                e.preventDefault();
                alert('Download latest version would start here');
            });
            
            document.getElementById('contact-support').addEventListener('click', function(e) {
                e.preventDefault();
                alert('Contact support would open here');
            });
            
            // Back button
            document.getElementById('back-to-email').addEventListener('click', function() {
                showScreen('email-screen');
            });
            
            // Verification screen
            const verificationInputs = document.querySelectorAll('.verification-input');
            verificationInputs.forEach((input, index) => {
                input.addEventListener('input', function() {
                    if (this.value.length === 1) {
                        if (index < verificationInputs.length - 1) {
                            verificationInputs[index + 1].focus();
                        }
                    }
                });
                
                input.addEventListener('keydown', function(e) {
                    if (e.key === 'Backspace' && this.value.length === 0) {
                        if (index > 0) {
                            verificationInputs[index - 1].focus();
                        }
                    }
                });
            });
            
            document.getElementById('resend-code').addEventListener('click', function(e) {
                e.preventDefault();
                alert('Code resent to your email');
            });
            
            document.getElementById('verify-code').addEventListener('click', function() {
                // Here you would normally verify the code
                showScreen('accessibility-screen');
            });
            
            // Accessibility screen
            document.getElementById('open-accessibility').addEventListener('click', function() {
                alert('This would open System Preferences > Security & Privacy > Privacy > Accessibility');
            });
            
            document.getElementById('accessibility-done').addEventListener('click', function() {
                showScreen('safety-screen');
            });
            
            // Safety screen
            document.getElementById('continue-to-chat').addEventListener('click', function() {
                showScreen('chat-screen');
            });
            
            // Chat screen
            document.getElementById('send-message').addEventListener('click', sendChatMessage);
            document.getElementById('chat-input-field').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendChatMessage();
                }
            });
            
            function sendChatMessage() {
                const messageInput = document.getElementById('chat-input-field');
                const message = messageInput.value.trim();
                
                if (message) {
                    // Add user message
                    const chatMessages = document.getElementById('chat-messages');
                    chatMessages.innerHTML += `
                        <div class="message outgoing">
                            <div class="message-bubble">
                                ${message}
                            </div>
                        </div>
                    `;
                    
                    // Save name and reply
                    userName = message;
                    messageInput.value = '';
                    
                    // Scroll to bottom
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                    
                    // Simulate typing and reply after a delay
                    setTimeout(() => {
                        chatMessages.innerHTML += `
                            <div class="message incoming">
                                <div class="message-bubble">
                                    Nice to meet you, ${userName}! Now I'd like to show you how I can alert you about important activities in real-time. Let's test my notification feature.
                                </div>
                            </div>
                        `;
                        chatMessages.scrollTop = chatMessages.scrollHeight;
                        
                        // Move to notification screen after delay
                        setTimeout(() => {
                            showScreen('notification-screen');
                        }, 2000);
                    }, 1000);
                }
            }
            
            // Notification permission and flow
            document.getElementById('allow-notifications').addEventListener('click', function() {
                this.classList.add('hidden');
                document.getElementById('waiting-message').classList.remove('hidden');
                document.getElementById('notification-received').classList.remove('hidden');
                
                // In a real app, you would request notification permissions here
                // For demo, we'll just show a mock notification after a delay
                setTimeout(() => {
                    document.getElementById('mock-notification').classList.remove('hidden');
                }, 5000); // Show notification after 5 seconds
            });
            
            document.getElementById('notification-dismiss').addEventListener('click', function() {
                document.getElementById('mock-notification').classList.add('hidden');
            });
            
            document.getElementById('notification-open').addEventListener('click', function() {
                document.getElementById('mock-notification').classList.add('hidden');
                showScreen('notification-results-screen');
            });
            
            document.getElementById('notification-received').addEventListener('click', function() {
                document.getElementById('mock-notification').classList.add('hidden');
                showScreen('notification-results-screen');
            });
            
            // Notification results chat interaction
            document.getElementById('notification-result-send').addEventListener('click', sendNotificationResultMessage);
            document.getElementById('notification-result-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendNotificationResultMessage();
                }
            });
            
            function sendNotificationResultMessage() {
                const messageInput = document.getElementById('notification-result-input');
                const message = messageInput.value.trim();
                
                if (message) {
                    // Add user message
                    const chatMessages = document.getElementById('notification-result-messages');
                    chatMessages.innerHTML += `
                        <div class="message outgoing">
                            <div class="message-bubble">
                                ${message}
                            </div>
                        </div>
                    `;
                    
                    messageInput.value = '';
                    
                    // Scroll to bottom
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                    
                    // Simulate typing and reply after a delay
                    setTimeout(() => {
                        chatMessages.innerHTML += `
                            <div class="message incoming">
                                <div class="message-bubble">
                                    Perfect! I've created a task for you to research renewable energy solutions. You'll be able to access all your tasks once we finish onboarding.
                                </div>
                            </div>
                        `;
                        chatMessages.scrollTop = chatMessages.scrollHeight;
                    }, 1000);
                }
            }
        });
    </script>
</body>
</html>